<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Case Influence on Parameter Estimates — est_change_raw • semfindr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Case Influence on Parameter Estimates — est_change_raw" />
<meta property="og:description" content="Gets a lavaan_rerun() output and computes the
changes in selected parameters for each case." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">semfindr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/semfindr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/selecting_cases.html">Selecting Cases In Rerun</a>
    </li>
    <li>
      <a href="../articles/user_id.html">Use Case IDs</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sfcheung/semfindr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Case Influence on Parameter Estimates</h1>
    <small class="dont-index">Source: <a href='https://github.com/sfcheung/semfindr/blob/master/R/est_change_raw.R'><code>R/est_change_raw.R</code></a></small>
    <div class="hidden name"><code>est_change_raw.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Gets a <code><a href='lavaan_rerun.html'>lavaan_rerun()</a></code> output and computes the
changes in selected parameters for each case.</p>
    </div>

    <pre class="usage"><span class='fu'>est_change_raw</span><span class='op'>(</span><span class='va'>rerun_out</span>, parameters <span class='op'>=</span> <span class='cn'>NULL</span>, standardized <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>rerun_out</th>
      <td><p>The output from <code><a href='lavaan_rerun.html'>lavaan_rerun()</a></code>.</p></td>
    </tr>
    <tr>
      <th>parameters</th>
      <td><p>A character vector to specify the selected
parameters. Each parameter is named as in <code>lavaan</code> syntax, e.g.,
<code>x ~ y</code> or <code>x ~~ y</code>, as appeared in the columns <code>lhs</code>, <code>op</code>, and <code>rhs</code>
in the output of <code><a href='https://rdrr.io/pkg/lavaan/man/parameterEstimates.html'>lavaan::parameterEstimates()</a></code>. If <code>NULL</code>, the
default, differences on all free parameters will be computed.</p></td>
    </tr>
    <tr>
      <th>standardized</th>
      <td><p>If <code>TRUE</code>, the changes in the full standardized
solution is returned (<code>type</code> = <code>std.all</code> in
<code><a href='https://rdrr.io/pkg/lavaan/man/standardizedSolution.html'>lavaan::standardizedSolution()</a></code>). Otherwise, the changes in the
unstandardized solution is returned. Default is <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A matrix with the number of columns equals to the number of
requested parameters, and the number of rows equals to the number
of cases. The row names are the case identification values used in
<code><a href='lavaan_rerun.html'>lavaan_rerun()</a></code>. The elements are the raw differences.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For each case, <code>est_change_raw()</code> computes the differences
in the estimates of selected parameters with and without this
case: (estimate with all case) - (estimate without this case). The
change is the raw change, either for the standardized or
unstandardized solution. The change is <em>not</em> divided by standard
error.</p>
<p>If the analysis is not admissible or did not converge when a case
is deleted, <code>NA</code>s will be returned for this case on the
differences.</p>
<p>Currently it only supports single-group models.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Pek, J., &amp; MacCallum, R. (2011). Sensitivity analysis
in structural equation models: Cases and their influence.
<em>Multivariate Behavioral Research, 46</em>(2), 202–228.
doi:10.1080/00273171.2011.561068</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Shu Fai Cheung (shufai.cheung@gmail.com)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://lavaan.ugent.be'>lavaan</a></span><span class='op'>)</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>pa_dat</span>
<span class='co'># For illustration only, select only the first 50 cases</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>50</span>, <span class='op'>]</span>
<span class='co'># The model</span>
<span class='va'>mod</span> <span class='op'>&lt;-</span>
<span class='st'>"
m1 ~ iv1 + iv2
dv ~ m1
"</span>
<span class='co'># Fit the model</span>
<span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'>lavaan</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lavaan/man/sem.html'>sem</a></span><span class='op'>(</span><span class='va'>mod</span>, <span class='va'>dat</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; lavaan 0.6-9 ended normally after 13 iterations
#&gt; 
#&gt;   Estimator                                         ML
#&gt;   Optimization method                           NLMINB
#&gt;   Number of model parameters                         5
#&gt;                                                       
#&gt;   Number of observations                            50
#&gt;                                                       
#&gt; Model Test User Model:
#&gt;                                                       
#&gt;   Test statistic                                 1.768
#&gt;   Degrees of freedom                                 2
#&gt;   P-value (Chi-square)                           0.413
#&gt; 
#&gt; Parameter Estimates:
#&gt; 
#&gt;   Standard errors                             Standard
#&gt;   Information                                 Expected
#&gt;   Information saturated (h1) model          Structured
#&gt; 
#&gt; Regressions:
#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)
#&gt;   m1 ~                                                
#&gt;     iv1              -0.159    0.166   -0.954    0.340
#&gt;     iv2               0.525    0.162    3.241    0.001
#&gt;   dv ~                                                
#&gt;     m1                0.350    0.161    2.169    0.030
#&gt; 
#&gt; Variances:
#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)
#&gt;    .m1                0.901    0.180    5.000    0.000
#&gt;    .dv                1.423    0.285    5.000    0.000
#&gt; </div><div class='input'><span class='co'># Fit the model n times. Each time with one case removed.</span>
<span class='va'>fit_rerun</span> <span class='op'>&lt;-</span> <span class='fu'><a href='lavaan_rerun.html'>lavaan_rerun</a></span><span class='op'>(</span><span class='va'>fit</span>, parallel <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>The expected CPU time is 2.95 second(s).</span>
#&gt; <span class='message'>Could be faster if ran in parallel.</span></div><div class='input'><span class='co'># Compute the changes in parameter estimates if a case is removed</span>
<span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>est_change_raw</span><span class='op'>(</span><span class='va'>fit_rerun</span><span class='op'>)</span>
<span class='co'># Results excluding a case, for the first few cases</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          m1~iv1        m1~iv2        dv~m1       m1~~m1      dv~~dv
#&gt; 1  0.0092480665 -1.047898e-02  0.011830111 -0.008096169  0.01779952
#&gt; 2  0.0020230088  5.428349e-04 -0.001349761 -0.017310049 -0.02737262
#&gt; 3  0.0002233174  2.457910e-04 -0.003906897 -0.018389061 -0.02461344
#&gt; 4 -0.0053785539  6.050253e-04  0.005471007 -0.014714327 -0.02081529
#&gt; 5  0.0192294553  4.184833e-03  0.011198239  0.027396294 -0.02589284
#&gt; 6  0.0011748382 -1.479950e-06  0.001793108 -0.017949638 -0.01807074</div><div class='input'><span class='co'># Note that these are the differences in parameter estimates.</span>

<span class='co'># The parameter estimates from all cases</span>
<span class='op'>(</span><span class='va'>coef_all</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/coef.html'>coef</a></span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; m1~iv1 m1~iv2  dv~m1 m1~~m1 dv~~dv 
#&gt; -0.159  0.525  0.350  0.901  1.423 </div><div class='input'><span class='co'># The parameter estimates from manually deleting the first case</span>
<span class='va'>fit_no_1</span> <span class='op'>&lt;-</span> <span class='fu'>lavaan</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lavaan/man/sem.html'>sem</a></span><span class='op'>(</span><span class='va'>mod</span>, <span class='va'>dat</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span>, <span class='op'>]</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>coef_no_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/coef.html'>coef</a></span><span class='op'>(</span><span class='va'>fit_no_1</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; m1~iv1 m1~iv2  dv~m1 m1~~m1 dv~~dv 
#&gt; -0.168  0.536  0.338  0.909  1.406 </div><div class='input'><span class='co'># The differences</span>
<span class='va'>coef_all</span> <span class='op'>-</span> <span class='va'>coef_no_1</span>
</div><div class='output co'>#&gt; m1~iv1 m1~iv2  dv~m1 m1~~m1 dv~~dv 
#&gt;  0.009 -0.010  0.012 -0.008  0.018 </div><div class='input'><span class='co'># The first row of `est_change_raw(fit_rerun)`</span>
<span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>, <span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; m1~iv1 m1~iv2  dv~m1 m1~~m1 dv~~dv 
#&gt;  0.009 -0.010  0.012 -0.008  0.018 </div><div class='input'>
<span class='co'># Compute only the changes of the paths from iv1 and iv2 to m1</span>
<span class='va'>out2</span> <span class='op'>&lt;-</span> <span class='fu'>est_change_raw</span><span class='op'>(</span><span class='va'>fit_rerun</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"m1 ~ iv1"</span>, <span class='st'>"m1 ~ iv2"</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># Results excluding a case, for the first few cases</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>out2</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          m1~iv1        m1~iv2
#&gt; 1  0.0092480665 -1.047898e-02
#&gt; 2  0.0020230088  5.428349e-04
#&gt; 3  0.0002233174  2.457910e-04
#&gt; 4 -0.0053785539  6.050253e-04
#&gt; 5  0.0192294553  4.184833e-03
#&gt; 6  0.0011748382 -1.479950e-06</div><div class='input'><span class='co'># Note that only the changes in the selected paths are included.</span>

<span class='co'># Use standardized = TRUE to compare the differences in standardized solution</span>
<span class='va'>out2_std</span> <span class='op'>&lt;-</span> <span class='fu'>est_change_raw</span><span class='op'>(</span><span class='va'>fit_rerun</span>, 
                          <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"m1 ~ iv1"</span>, <span class='st'>"m1 ~ iv2"</span><span class='op'>)</span>,
                          standardized <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>out2_std</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         m1~iv1        m1~iv2
#&gt; 1  0.007290991 -8.065891e-03
#&gt; 2  0.001486231  3.105415e-04
#&gt; 3 -0.001648843  7.628945e-03
#&gt; 4 -0.004308885 -3.605264e-04
#&gt; 5  0.017794702 -5.627259e-03
#&gt; 6  0.000810271 -5.165699e-05</div><div class='input'><span class='op'>(</span><span class='va'>est_std_all</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/lavaan/man/parameterEstimates.html'>parameterEstimates</a></span><span class='op'>(</span><span class='va'>fit</span>,
                 standardized <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lhs"</span>, <span class='st'>"op"</span>, <span class='st'>"rhs"</span>, <span class='st'>"std.all"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   lhs op rhs std.all
#&gt; 1  m1  ~ iv1  -0.125
#&gt; 2  m1  ~ iv2   0.425</div><div class='input'><span class='op'>(</span><span class='va'>est_std_no_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/lavaan/man/parameterEstimates.html'>parameterEstimates</a></span><span class='op'>(</span><span class='va'>fit_no_1</span>,
                 standardized <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lhs"</span>, <span class='st'>"op"</span>, <span class='st'>"rhs"</span>, <span class='st'>"std.all"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   lhs op rhs std.all
#&gt; 1  m1  ~ iv1  -0.133
#&gt; 2  m1  ~ iv2   0.433</div><div class='input'><span class='co'># The differences</span>
<span class='va'>est_std_all</span><span class='op'>$</span><span class='va'>std.all</span> <span class='op'>-</span> <span class='va'>est_std_no_1</span><span class='op'>$</span><span class='va'>std.all</span>
</div><div class='output co'>#&gt; [1]  0.007290991 -0.008065891</div><div class='input'><span class='co'># The first row of `out2_std`</span>
<span class='va'>out2_std</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>
</div><div class='output co'>#&gt;       m1~iv1       m1~iv2 
#&gt;  0.007290991 -0.008065891 </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Shu Fai Cheung.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


