<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Case Influence on Parameter Estimates (Approximate) — est_change_raw_approx • semfindr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/Chivo_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Case Influence on Parameter Estimates (Approximate) — est_change_raw_approx"><meta name="description" content="Gets a lavaan::lavaan() output and computes the
approximate changes in selected parameters for each case
if included."><meta property="og:description" content="Gets a lavaan::lavaan() output and computes the
approximate changes in selected parameters for each case
if included."><meta property="og:image" content="https://sfcheung.github.io/semfindr/logo.png"><meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">semfindr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/semfindr.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>&lt;General&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/casewise_scores.html">Approximate Case Influence Using Scores and Casewise Likelihood</a></li>
    <li><a class="dropdown-item" href="../articles/selecting_cases.html">Selecting Cases In lavaan_rerun</a></li>
    <li><a class="dropdown-item" href="../articles/user_id.html">Using Case IDs</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>&lt;Multiple-Group Models&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/multiple_group.html">Illustration</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>&lt;Other Features&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/user_function.html">Case Influence on Arbitrary Statistics</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sfcheung/semfindr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Case Influence on Parameter Estimates (Approximate)</h1>
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/semfindr/blob/master/R/est_change_raw_approx.R" class="external-link"><code>R/est_change_raw_approx.R</code></a></small>
      <div class="d-none name"><code>est_change_raw_approx.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Gets a <code><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html" class="external-link">lavaan::lavaan()</a></code> output and computes the
approximate changes in selected parameters for each case
if included.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">est_change_raw_approx</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  case_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allow_inadmissible <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  skip_all_checks <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>The output from <code><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html" class="external-link">lavaan::lavaan()</a></code> or its wrappers (e.g.,
<code><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">lavaan::cfa()</a></code> and <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code>).</p></dd>


<dt id="arg-parameters">parameters<a class="anchor" aria-label="anchor" href="#arg-parameters"></a></dt>
<dd><p>A character vector to specify the selected
parameters. Each parameter is named as in <code>lavaan</code> syntax, e.g.,
<code>x ~ y</code> or <code>x ~~ y</code>, as appeared in the columns <code>lhs</code>, <code>op</code>, and <code>rhs</code>
in the output of <code><a href="https://rdrr.io/pkg/lavaan/man/parameterEstimates.html" class="external-link">lavaan::parameterEstimates()</a></code>.
Supports specifying an operator to select all parameters with these
operators: <code>~</code>, <code>~~</code>, <code>=~</code>, and <code>~1</code>. This vector can contain
both parameter names and operators. More details can be found
in the help of <code><a href="pars_id.html">pars_id()</a></code>.
If omitted or <code>NULL</code>, the
default, changes on all free parameters will be computed.</p></dd>


<dt id="arg-case-id">case_id<a class="anchor" aria-label="anchor" href="#arg-case-id"></a></dt>
<dd><p>If it is a character vector of length equals to the
number of cases (the number of rows in the data in <code>fit</code>), then it
is the vector of case identification values. If it is <code>NULL</code>, the
default, then <code>case.idx</code> used by <code>lavaan</code> functions will be used
as case identification values.</p></dd>


<dt id="arg-allow-inadmissible">allow_inadmissible<a class="anchor" aria-label="anchor" href="#arg-allow-inadmissible"></a></dt>
<dd><p>If <code>TRUE</code>, accepts a fit object with
inadmissible results (i.e., <code>post.check</code> from
<code><a href="https://rdrr.io/pkg/lavaan/man/lavInspect.html" class="external-link">lavaan::lavInspect()</a></code> is <code>FALSE</code>). Default is <code>FALSE</code>.</p></dd>


<dt id="arg-skip-all-checks">skip_all_checks<a class="anchor" aria-label="anchor" href="#arg-skip-all-checks"></a></dt>
<dd><p>If <code>TRUE</code>, skips all checks and allows
users to run this function on any object of <code>lavaan</code> class.
For users to experiment this and other functions on models
not officially supported. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>est_change</code>-class object, which is
matrix with the number of columns equals to the number of
requested parameters, and the number of rows equals to the number
of cases. The row names are case identification values. The
elements are the raw differences.
A print method is available for user-friendly output.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each case, <code>est_change_raw_approx()</code> computes the
approximate differences
in the estimates of selected parameters with and without this
case:</p>
<p>(Estimate with all case) - (Estimate without this case).</p>
<p>The change is the approximate raw change. The change is <em>not</em> divided by
the standard error of an estimate (hence "raw" in the function name).
This is a measure of the influence of a case on the parameter
estimates if it is included.</p>
<p>If the value of a case is positive, including the case increases an estimate.</p>
<p>If the value of a case is negative, including the case decreases an estimate.</p>
<p>The model is not refitted. Therefore, the result is only an
approximation of that of <code><a href="est_change_raw.html">est_change_raw()</a></code>. However, this
approximation is useful for identifying potentially influential
cases when the sample size is very large or the model takes a long
time to fit. This function can be used to identify potentially
influential cases quickly and then select them to conduct the
leave-one-out sensitivity analysis using <code><a href="lavaan_rerun.html">lavaan_rerun()</a></code> and
<code><a href="est_change_raw.html">est_change_raw()</a></code>.</p>
<p>Unlike <code><a href="est_change_raw.html">est_change_raw()</a></code>, it does not yet support computing the
changes for the standardized solution.</p>
<p>For the technical details, please refer to the vignette
on this approach: <code><a href="../articles/casewise_scores.html">vignette("casewise_scores", package = "semfindr")</a></code></p>
<p>The approximate approach supports a model with
equality constraints (available in 0.1.4.8 and later version).</p>
<p>Supports both single-group and multiple-group models.
(Support for multiple-group models available in 0.1.4.8 and later version).</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Idea by Mark Hok Chio Lai <a href="https://orcid.org/0000-0002-9196-7406" class="external-link">https://orcid.org/0000-0002-9196-7406</a>,
implemented by Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448" class="external-link">https://orcid.org/0000-0002-9871-9448</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A path model</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">pa_dat</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">m1 ~ a1 * iv1 + a2 * iv2</span></span></span>
<span class="r-in"><span><span class="st">dv ~ b * m1</span></span></span>
<span class="r-in"><span><span class="st">a1b := a1 * b</span></span></span>
<span class="r-in"><span><span class="st">a2b := a2 * b</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="co"># Fit the model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lavaan 0.6-19 ended normally after 1 iteration</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Estimator                                         ML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Optimization method                           NLMINB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of model parameters                         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of observations                           100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model Test User Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Test statistic                                 6.711</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Degrees of freedom                                 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   P-value (Chi-square)                           0.035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter Estimates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Standard errors                             Standard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information                                 Expected</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information saturated (h1) model          Structured</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regressions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   m1 ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     iv1       (a1)    0.215    0.106    2.036    0.042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     iv2       (a2)    0.522    0.099    5.253    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   dv ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     m1         (b)    0.517    0.106    4.895    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variances:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .m1                0.903    0.128    7.071    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .dv                1.321    0.187    7.071    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Defined Parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a1b               0.111    0.059    1.880    0.060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a2b               0.270    0.075    3.581    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Compute the approximate changes in parameter estimates if a case is included</span></span></span>
<span class="r-in"><span><span class="co"># vs. if this case is excluded.</span></span></span>
<span class="r-in"><span><span class="co"># That is, the approximate case influence on parameter estimates.</span></span></span>
<span class="r-in"><span><span class="va">out_approx</span> <span class="op">&lt;-</span> <span class="fu">est_change_raw_approx</span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out_approx</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          m1~iv1        m1~iv2        dv~m1       m1~~m1       dv~~dv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.0025826195 -2.987160e-03  0.005478785 -0.004783799  0.003015677</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.0007581403  3.411181e-04 -0.001383390 -0.008744342 -0.011010937</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.0039693069 -3.914928e-03 -0.003154241 -0.008240420 -0.008525904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.0025450320 -3.118916e-04  0.002296162 -0.006671599 -0.008331854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.0070027557  2.748024e-03  0.003450422  0.006144848 -0.012529327</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.0004248632  9.671545e-05  0.001008609 -0.008958217 -0.010293608</span>
<span class="r-in"><span><span class="co"># Fit the model several times. Each time with one case removed.</span></span></span>
<span class="r-in"><span><span class="co"># For illustration, do this only for 10 selected cases</span></span></span>
<span class="r-in"><span><span class="va">fit_rerun</span> <span class="op">&lt;-</span> <span class="fu"><a href="lavaan_rerun.html">lavaan_rerun</a></span><span class="op">(</span><span class="va">fit</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                          to_rerun <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The expected CPU time is 0.45 second(s).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Could be faster if run in parallel.</span>
<span class="r-in"><span><span class="co"># Compute the changes in parameter estimates if a case is included</span></span></span>
<span class="r-in"><span><span class="co"># vs. if this case is excluded.</span></span></span>
<span class="r-in"><span><span class="co"># That is, the case influence on the parameter estimates.</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="est_change_raw.html">est_change_raw</a></span><span class="op">(</span><span class="va">fit_rerun</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">out</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -- Case Influence on Parameter Estimates --</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id m1~iv1 id m1~iv2 id  dv~m1 id m1~~m1 id dv~~dv id    a1b id    a2b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   7 -0.013  7  0.007  9 -0.009  6 -0.009  9  0.051  7 -0.005  7  0.007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   5  0.007  8  0.007 10 -0.008  2 -0.009  8 -0.013 10 -0.005  9 -0.006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   8  0.006 10  0.004  7  0.007  3 -0.008  5 -0.013  9 -0.005  8  0.005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  10 -0.006  3 -0.004  1  0.005 10 -0.007  2 -0.011  5  0.004  3 -0.004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   9 -0.005  1 -0.003  5  0.004  8 -0.007  6 -0.010  8  0.004  5  0.003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   3 -0.004  5  0.003  3 -0.003  4 -0.007  3 -0.008  3 -0.003 10 -0.002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   1  0.003  9 -0.003  8  0.003  5  0.006  4 -0.008  1  0.003  1  0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   4 -0.003  2  0.000  4  0.002  1 -0.005  7 -0.008  4 -0.001  4  0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   2  0.001  4  0.000  2 -0.001  9 -0.004 10  0.007  6  0.000  6  0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  6  0.000  6  0.000  6  0.001  7  0.000  1  0.003  2  0.000  2 -0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Changes are raw changes if a case is included.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - All stored cases are displayed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Cases sorted by the absolute changes for each variable.</span>
<span class="r-in"><span><span class="co"># Compare the results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">out_approx</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">out</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">0</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="est_change_raw_approx-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">out_approx</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">5</span><span class="op">]</span>, <span class="va">out</span><span class="op">[</span>, <span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">0</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="est_change_raw_approx-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A CFA model</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">cfa_dat</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">f1 =~  x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">f2 =~  x4 + x5 + x6</span></span></span>
<span class="r-in"><span><span class="st">f1 ~~ f2</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="co"># Fit the model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lavaan 0.6-19 ended normally after 37 iterations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Estimator                                         ML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Optimization method                           NLMINB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of model parameters                        13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of observations                           100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model Test User Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Test statistic                                12.027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Degrees of freedom                                 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   P-value (Chi-square)                           0.150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter Estimates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Standard errors                             Standard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information                                 Expected</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information saturated (h1) model          Structured</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latent Variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f1 =~                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x1                1.000                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x2                0.767    0.225    3.405    0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x3                1.047    0.296    3.542    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f2 =~                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x4                1.000                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x5                2.114    0.869    2.431    0.015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x6                0.992    0.377    2.635    0.008</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Covariances:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f1 ~~                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     f2                0.171    0.091    1.884    0.060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variances:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x1                0.841    0.221    3.802    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x2                1.214    0.208    5.823    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x3                1.018    0.251    4.064    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x4                1.103    0.186    5.918    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x5                0.993    0.437    2.270    0.023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x6                0.882    0.158    5.575    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     f1                0.708    0.262    2.703    0.007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     f2                0.250    0.151    1.659    0.097</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Compute the approximate changes in parameter estimates if a case is included</span></span></span>
<span class="r-in"><span><span class="co"># vs. if this case is excluded.</span></span></span>
<span class="r-in"><span><span class="co"># That is, approximate case influence on parameter estimates.</span></span></span>
<span class="r-in"><span><span class="co"># Compute changes for free loadings only.</span></span></span>
<span class="r-in"><span><span class="va">out_approx</span> <span class="op">&lt;-</span> <span class="fu">est_change_raw_approx</span><span class="op">(</span><span class="va">fit</span>,</span></span>
<span class="r-in"><span>                                    parameters <span class="op">=</span> <span class="st">"=~"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out_approx</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         f1=~x2       f1=~x3       f2=~x5        f2=~x6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.001920110  0.010740746  0.004541900 -0.0144098708</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.058933568  0.073874875  0.057340739 -0.0434930940</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.144211320 -0.004047592 -0.436403769 -0.0108782714</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.009547216 -0.011335796 -0.000486256  0.0022414847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.004914233 -0.021463799  0.006004056 -0.0086035844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.002934830  0.018952764 -0.016648522  0.0001674064</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A latent variable model</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">sem_dat</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">f1 =~  x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">f2 =~  x4 + x5 + x6</span></span></span>
<span class="r-in"><span><span class="st">f3 =~  x7 + x8 + x9</span></span></span>
<span class="r-in"><span><span class="st">f2 ~   a * f1</span></span></span>
<span class="r-in"><span><span class="st">f3 ~   b * f2</span></span></span>
<span class="r-in"><span><span class="st">ab := a * b</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="co"># Fit the model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lavaan 0.6-19 ended normally after 37 iterations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Estimator                                         ML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Optimization method                           NLMINB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of model parameters                        20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of observations                           200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model Test User Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Test statistic                                41.768</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Degrees of freedom                                25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   P-value (Chi-square)                           0.019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter Estimates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Standard errors                             Standard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information                                 Expected</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information saturated (h1) model          Structured</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latent Variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f1 =~                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x1                1.000                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x2                0.590    0.145    4.054    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x3                0.808    0.168    4.812    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f2 =~                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x4                1.000                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x5                0.730    0.099    7.400    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x6                0.429    0.083    5.166    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f3 =~                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x7                1.000                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x8                2.019    0.589    3.426    0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x9                2.747    0.788    3.486    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regressions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f2 ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     f1         (a)    1.115    0.233    4.788    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   f3 ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     f2         (b)    0.206    0.061    3.394    0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variances:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x1                1.183    0.173    6.831    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x2                1.129    0.127    8.909    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x3                1.027    0.134    7.667    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x4                0.833    0.173    4.812    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x5                1.078    0.140    7.714    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x6                1.234    0.132    9.367    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x7                1.056    0.112    9.428    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x8                1.042    0.139    7.478    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .x9                1.077    0.197    5.470    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     f1                0.658    0.190    3.474    0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .f2                0.647    0.215    3.010    0.003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .f3                0.062    0.035    1.771    0.077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Defined Parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ab                0.230    0.079    2.895    0.004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Compute the approximate changes in parameter estimates if a case is included</span></span></span>
<span class="r-in"><span><span class="co"># vs. if this case is excluded.</span></span></span>
<span class="r-in"><span><span class="co"># That is, the approximate case influence on parameter estimates.</span></span></span>
<span class="r-in"><span><span class="co"># Compute changes for structural paths only</span></span></span>
<span class="r-in"><span><span class="va">out_approx</span> <span class="op">&lt;-</span> <span class="fu">est_change_raw_approx</span><span class="op">(</span><span class="va">fit</span>,</span></span>
<span class="r-in"><span>                                    parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"~"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out_approx</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          f2~f1         f3~f2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.001088313 -0.0078430905</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.010965561 -0.0055003320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.031284855 -0.0054784700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.060426691  0.0002338238</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -0.014994222 -0.0009711227</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -0.002126077 -0.0009193544</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shu Fai Cheung, Mark Hok Chio Lai.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

