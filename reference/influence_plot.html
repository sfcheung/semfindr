<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot selected influence statistics and measures of extremeness — influence_plot • semfindr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Plot selected influence statistics and measures of extremeness — influence_plot" />
<meta property="og:description" content="Get a influence_stat() output and plot selected statistics" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">semfindr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/semfindr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sfcheung/semfindr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot selected influence statistics and measures of extremeness</h1>
    <small class="dont-index">Source: <a href='https://github.com/sfcheung/semfindr/blob/master/R/influence_plot.R'><code>R/influence_plot.R</code></a></small>
    <div class="hidden name"><code>influence_plot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Get a <code><a href='influence_stat.html'>influence_stat()</a></code> output and plot selected statistics</p>
    </div>

    <pre class="usage"><span class='fu'>gcd_plot</span><span class='op'>(</span><span class='va'>influence_out</span>, cutoff_gcd <span class='op'>=</span> <span class='cn'>NULL</span>, largest_gcd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>md_plot</span><span class='op'>(</span>
  <span class='va'>influence_out</span>,
  cutoff_md <span class='op'>=</span> <span class='cn'>FALSE</span>,
  cutoff_md_qchisq <span class='op'>=</span> <span class='fl'>0.975</span>,
  largest_md <span class='op'>=</span> <span class='fl'>1</span>
<span class='op'>)</span>

<span class='fu'>gcd_gof_plot</span><span class='op'>(</span>
  <span class='va'>influence_out</span>,
  <span class='va'>fit_measure</span>,
  cutoff_gcd <span class='op'>=</span> <span class='cn'>NULL</span>,
  cutoff_fit_measure <span class='op'>=</span> <span class='cn'>NULL</span>,
  largest_gcd <span class='op'>=</span> <span class='fl'>1</span>,
  largest_fit_measure <span class='op'>=</span> <span class='fl'>1</span>
<span class='op'>)</span>

<span class='fu'>gcd_gof_md_plot</span><span class='op'>(</span>
  <span class='va'>influence_out</span>,
  <span class='va'>fit_measure</span>,
  cutoff_md <span class='op'>=</span> <span class='cn'>FALSE</span>,
  cutoff_fit_measure <span class='op'>=</span> <span class='cn'>NULL</span>,
  circle_size <span class='op'>=</span> <span class='fl'>2</span>,
  cutoff_md_qchisq <span class='op'>=</span> <span class='fl'>0.975</span>,
  cutoff_gcd <span class='op'>=</span> <span class='cn'>NULL</span>,
  largest_gcd <span class='op'>=</span> <span class='fl'>1</span>,
  largest_md <span class='op'>=</span> <span class='fl'>1</span>,
  largest_fit_measure <span class='op'>=</span> <span class='fl'>1</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>influence_out</th>
      <td><p>The output from <code><a href='influence_stat.html'>influence_stat()</a></code>.</p></td>
    </tr>
    <tr>
      <th>cutoff_gcd</th>
      <td><p>Cases with generalized Cook's distance larger than this
value will be labeled. Default is <code>NULL</code>. If <code>NULL</code>, no
cutoff line will be drawn.</p></td>
    </tr>
    <tr>
      <th>largest_gcd</th>
      <td><p>The number of cases with the largest generalized
Cook's distance
to be labelled.
Default is 1. If not an integer, it will be rounded
to the nearest
integer.</p></td>
    </tr>
    <tr>
      <th>cutoff_md</th>
      <td><p>Cases with Mahalanobis distance larger than this value
will be labeled. If it is <code>TRUE</code>,
the (<code>cutoff_md_qchisq</code> x 100)th percentile of the
chi-square distribution with
the degrees of freedom equal to the number of variables
will be used.  Default is <code>FALSE</code>, no cutoff value.</p></td>
    </tr>
    <tr>
      <th>cutoff_md_qchisq</th>
      <td><p>This value multiplied by 100 is the percentile to
be used
for labeling case based on Mahalanobis distance.
Default is .975.</p></td>
    </tr>
    <tr>
      <th>largest_md</th>
      <td><p>The number of cases with the largest Mahalanobis distance
to be labelled.
Default is 1. If not an integer, it will be rounded to
the nearest
integer.</p></td>
    </tr>
    <tr>
      <th>fit_measure</th>
      <td><p>Specify the fit measure to be used in a plot. Use the
name
in the <code><a href='https://rdrr.io/pkg/lavaan/man/fitMeasures.html'>lavaan::fitMeasures()</a></code> function. No default
value.</p></td>
    </tr>
    <tr>
      <th>cutoff_fit_measure</th>
      <td><p>Cases with <code>fit_measure</code> larger than this cutoff
in magnitude
will be labeled. No default value and must be
specified.</p></td>
    </tr>
    <tr>
      <th>largest_fit_measure</th>
      <td><p>The number of cases with the largest selected
fit measure change in magnitude
to be labelled.
Default is 1. If not an integer, it will be rounded to
the nearest
integer.</p></td>
    </tr>
    <tr>
      <th>circle_size</th>
      <td><p>The size of the largest circle when the size of a circle
is controlled
by a statistic.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A ggplot2 plot. It will not be plotted. To plot it, use <code><a href='https://rdrr.io/r/graphics/plot.default.html'>plot()</a></code> on
the output.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The output of <code><a href='influence_stat.html'>influence_stat()</a></code> is simply a matrix. Therefore, this
function will work for any matrix provided.
Row number will be used on the x-axis if applicable. However, case
identification
values in the output from <code><a href='influence_stat.html'>influence_stat()</a></code> will be used for labeling
individual cases.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Pek, J., &amp; MacCallum, R. (2011). Sensitivity analysis in structural equation
models: Cases and their influence. <em>Multivariate Behavioral Research,
46</em>(2), 202-228. <a href='https://doi.org/10.1080/00273171.2011.561068'>https://doi.org/10.1080/00273171.2011.561068</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='influence_stat.html'>influence_stat()</a></code>.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>S. F. Cheung (shufai.cheung@gmail.com)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://lavaan.ugent.be'>lavaan</a></span><span class='op'>)</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>pa_dat</span>
<span class='co'># For illustration only, select only the first 50 cases</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>50</span>, <span class='op'>]</span>
<span class='co'># The model</span>
<span class='va'>mod</span> <span class='op'>&lt;-</span>
<span class='st'>"
m1 ~ iv1 + iv2
dv ~ m1
"</span>
<span class='co'># Fit the model</span>
<span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'>lavaan</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lavaan/man/sem.html'>sem</a></span><span class='op'>(</span><span class='va'>mod</span>, <span class='va'>dat</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; lavaan 0.6-9 ended normally after 13 iterations
#&gt; 
#&gt;   Estimator                                         ML
#&gt;   Optimization method                           NLMINB
#&gt;   Number of model parameters                         5
#&gt;                                                       
#&gt;   Number of observations                            50
#&gt;                                                       
#&gt; Model Test User Model:
#&gt;                                                       
#&gt;   Test statistic                                 1.768
#&gt;   Degrees of freedom                                 2
#&gt;   P-value (Chi-square)                           0.413
#&gt; 
#&gt; Parameter Estimates:
#&gt; 
#&gt;   Standard errors                             Standard
#&gt;   Information                                 Expected
#&gt;   Information saturated (h1) model          Structured
#&gt; 
#&gt; Regressions:
#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)
#&gt;   m1 ~                                                
#&gt;     iv1              -0.159    0.166   -0.954    0.340
#&gt;     iv2               0.525    0.162    3.241    0.001
#&gt;   dv ~                                                
#&gt;     m1                0.350    0.161    2.169    0.030
#&gt; 
#&gt; Variances:
#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)
#&gt;    .m1                0.901    0.180    5.000    0.000
#&gt;    .dv                1.423    0.285    5.000    0.000
#&gt; </div><div class='input'><span class='co'># Fit the model n times. Each time with one case removed.</span>
<span class='va'>fit_rerun</span> <span class='op'>&lt;-</span> <span class='fu'><a href='lavaan_rerun.html'>lavaan_rerun</a></span><span class='op'>(</span><span class='va'>fit</span>, parallel <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>The expected CPU time is 2 second(s).</span>
#&gt; <span class='message'>Could be faster if ran in parallel.</span></div><div class='input'><span class='co'># Get all default influence stats</span>
<span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'><a href='influence_stat.html'>influence_stat</a></span><span class='op'>(</span><span class='va'>fit_rerun</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          chisq cfi rmsea          tli       m1~iv1        m1~iv2       dv~m1
#&gt; 1  0.364966775   0     0 -0.089423524  0.055155120 -6.413054e-02  0.07360975
#&gt; 2  0.002466591   0     0 -0.001853612  0.012022425  3.317406e-03 -0.00827550
#&gt; 3 -0.025206945   0     0  0.004202146  0.001313708  1.480761e-03 -0.02394497
#&gt; 4 -0.035970625   0     0  0.006676175 -0.031966016  3.702928e-03  0.03357168
#&gt; 5  0.110992116   0     0 -0.028824532  0.116998821  2.621972e-02  0.06726178
#&gt; 6  0.086695524   0     0 -0.022536563  0.006980969 -9.042076e-06  0.01103398
#&gt;        m1~~m1      dv~~dv        gcd        md
#&gt; 1 -0.04407445  0.06267652 0.01722389 2.2538385
#&gt; 2 -0.09328821 -0.09338479 0.01767104 0.2927790
#&gt; 3 -0.09898699 -0.08413154 0.01745465 3.0251076
#&gt; 4 -0.07952396 -0.07133612 0.01357011 0.7810530
#&gt; 5  0.15520004 -0.08842656 0.05271526 2.7091742
#&gt; 6 -0.09666780 -0.06204820 0.01336721 0.4390106</div><div class='input'>
<span class='co'># Plot generalized Cook's distance. Label the 3 cases with largest distances.</span>
<span class='fu'>gcd_plot</span><span class='op'>(</span><span class='va'>out</span>, largest_gcd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</div><div class='img'><img src='influence_plot-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Plot Mahalanobis distance. Label the 3 cases with largest distances.</span>
<span class='fu'>md_plot</span><span class='op'>(</span><span class='va'>out</span>, largest_md <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</div><div class='img'><img src='influence_plot-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Plot changes in model chi-square against generalized Cook's distance.</span>
<span class='co'># Label the 3 cases largest changes in magnitude.</span>
<span class='co'># Label the 3 cases with largest generalized Cook's distance.</span>
<span class='fu'>gcd_gof_plot</span><span class='op'>(</span><span class='va'>out</span>, fit_measure <span class='op'>=</span> <span class='st'>"chisq"</span>, largest_gcd <span class='op'>=</span> <span class='fl'>3</span>,
             largest_fit_measure <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</div><div class='img'><img src='influence_plot-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Plot changes in model chi-square against Mahalanobis distance.</span>
<span class='co'># Size of bubble determined by generalized Cook's distance.</span>
<span class='co'># Label the 3 cases largest changes in magnitude.</span>
<span class='co'># Label the 3 cases with largest Mahalanobis distance.</span>
<span class='co'># Label the 3 cases with largest generalized Cook's distance.</span>
<span class='co'>#</span>
<span class='fu'>gcd_gof_md_plot</span><span class='op'>(</span><span class='va'>out</span>, fit_measure <span class='op'>=</span> <span class='st'>"chisq"</span>,
                     largest_gcd <span class='op'>=</span> <span class='fl'>3</span>,
                     largest_fit_measure <span class='op'>=</span> <span class='fl'>3</span>,
                     largest_md <span class='op'>=</span> <span class='fl'>3</span>,
                     circle_size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
</div><div class='img'><img src='influence_plot-4.png' alt='' width='700' height='433' /></div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Shu Fai Cheung.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


