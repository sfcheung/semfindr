<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Gets an influence_stat() output and plots selected
statistics."><title>Plots of Influence Measures — influence_plot • semfindr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/Chivo_Mono-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plots of Influence Measures — influence_plot"><meta property="og:description" content="Gets an influence_stat() output and plots selected
statistics."><meta property="og:image" content="https://sfcheung.github.io/semfindr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">semfindr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/semfindr.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>&lt;General&gt;</h6>
    <a class="dropdown-item" href="../articles/casewise_scores.html">Approximate Case Influence Using Scores and Casewise Likelihood</a>
    <a class="dropdown-item" href="../articles/selecting_cases.html">Selecting Cases In lavaan_rerun</a>
    <a class="dropdown-item" href="../articles/user_id.html">Using Case IDs</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>&lt;Multiple-Group Models&gt;</h6>
    <a class="dropdown-item" href="../articles/multiple_group.html">Illustration</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sfcheung/semfindr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plots of Influence Measures</h1>
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/semfindr/blob/HEAD/R/influence_plot.R" class="external-link"><code>R/influence_plot.R</code></a></small>
      <div class="d-none name"><code>influence_plot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Gets an <code><a href="influence_stat.html">influence_stat()</a></code> output and plots selected
statistics.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gcd_plot</span><span class="op">(</span></span>
<span>  <span class="va">influence_out</span>,</span>
<span>  cutoff_gcd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  largest_gcd <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  point_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  vline_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cutoff_line_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  case_label_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">md_plot</span><span class="op">(</span></span>
<span>  <span class="va">influence_out</span>,</span>
<span>  cutoff_md <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cutoff_md_qchisq <span class="op">=</span> <span class="fl">0.975</span>,</span>
<span>  largest_md <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  point_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  vline_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cutoff_line_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  case_label_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gcd_gof_plot</span><span class="op">(</span></span>
<span>  <span class="va">influence_out</span>,</span>
<span>  <span class="va">fit_measure</span>,</span>
<span>  cutoff_gcd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cutoff_fit_measure <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  largest_gcd <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  largest_fit_measure <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  point_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  hline_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cutoff_line_gcd_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cutoff_line_fit_measures_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  case_label_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gcd_gof_md_plot</span><span class="op">(</span></span>
<span>  <span class="va">influence_out</span>,</span>
<span>  <span class="va">fit_measure</span>,</span>
<span>  cutoff_md <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cutoff_fit_measure <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  circle_size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  cutoff_md_qchisq <span class="op">=</span> <span class="fl">0.975</span>,</span>
<span>  cutoff_gcd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  largest_gcd <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  largest_md <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  largest_fit_measure <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  point_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  hline_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cutoff_line_md_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cutoff_line_gcd_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cutoff_line_fit_measures_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  case_label_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>influence_out</dt>
<dd><p>The output from <code><a href="influence_stat.html">influence_stat()</a></code>.</p></dd>


<dt>cutoff_gcd</dt>
<dd><p>Cases with generalized Cook's distance or
approximate generalized Cook's distance larger
than this value will be labeled. Default is <code>NULL</code>. If <code>NULL</code>, no
cutoff line will be drawn.</p></dd>


<dt>largest_gcd</dt>
<dd><p>The number of cases with the largest generalized
Cook's distance or approximate generalized Cook's distance
to be labelled. Default is 1. If not an integer, it
will be rounded to the nearest integer.</p></dd>


<dt>point_aes</dt>
<dd><p>A named list of
arguments to be passed to
<code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">ggplot2::geom_point()</a></code> to modify how
to draw the points. Default is
<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> and internal default
settings will be used.</p></dd>


<dt>vline_aes</dt>
<dd><p>A named list of
arguments to be passed to
<code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">ggplot2::geom_segment()</a></code> to modify how
to draw the line for each case
in the index plot. Default is
<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> and internal default
settings will be used.</p></dd>


<dt>cutoff_line_aes</dt>
<dd><p>A named list
of arguments to be passed to
<code><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">ggplot2::geom_vline()</a></code> or
<code><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">ggplot2::geom_hline()</a></code> to modify how
to draw the line for user cutoff
value. Default is <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>
and internal default settings will be
used.</p></dd>


<dt>case_label_aes</dt>
<dd><p>A named list of
arguments to be passed to
<code><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html" class="external-link">ggrepel::geom_label_repel()</a></code> to
modify how to draw the labels for
cases marked (based on arguments
such as <code>cutoff_gcd</code> or <code>largest_gcd</code>).
Default is <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> and internal
default settings will be used.</p></dd>


<dt>cutoff_md</dt>
<dd><p>Cases with Mahalanobis distance larger than this
value will be labeled. If it is <code>TRUE</code>, the (<code>cutoff_md_qchisq</code> x
100)th percentile of the chi-square distribution with the degrees
of freedom equal to the number of variables will be used.  Default
is <code>FALSE</code>, no cutoff value.</p></dd>


<dt>cutoff_md_qchisq</dt>
<dd><p>This value multiplied by 100 is the
percentile to be used for labeling case based on Mahalanobis
distance. Default is .975.</p></dd>


<dt>largest_md</dt>
<dd><p>The number of cases with the largest Mahalanobis
distance to be labelled. Default is 1. If not an integer, it will
be rounded to the nearest integer.</p></dd>


<dt>fit_measure</dt>
<dd><p>The fit measure to be used in a
plot. Use the name in the <code><a href="https://rdrr.io/pkg/lavaan/man/fitMeasures.html" class="external-link">lavaan::fitMeasures()</a></code> function. No
default value.</p></dd>


<dt>cutoff_fit_measure</dt>
<dd><p>Cases with <code>fit_measure</code> larger than
this cutoff in magnitude will be labeled. No default value and
must be specified.</p></dd>


<dt>largest_fit_measure</dt>
<dd><p>The number of cases with the largest
selected fit measure change in magnitude to be labelled. Default is</p><ol><li><p>If not an integer, it will be rounded to the nearest integer.</p></li>
</ol></dd>


<dt>hline_aes</dt>
<dd><p>A named list of
arguments to be passed to
<code><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">ggplot2::geom_hline()</a></code> to modify how
to draw the horizontal line for zero
case influence. Default is <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>
and internal default settings will be
used.</p></dd>


<dt>cutoff_line_gcd_aes</dt>
<dd><p>Similar
to <code>cutoff_line_aes</code> but control
the line for the cutoff value of
<em>gCD</em>.</p></dd>


<dt>cutoff_line_fit_measures_aes</dt>
<dd><p>Similar
to <code>cutoff_line_aes</code> but control
the line for the cutoff value of
the selected fit measure.</p></dd>


<dt>circle_size</dt>
<dd><p>The size of the largest circle when the size
of a circle is controlled by a statistic.</p></dd>


<dt>cutoff_line_md_aes</dt>
<dd><p>Similar
to <code>cutoff_line_aes</code> but control
the line for the cutoff value of
the Mahalanobis distance.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A ggplot2 plot. Plotted by default. If assigned to a variable
or called inside a function, it will not be plotted. Use <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> to
plot it.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The output of <code><a href="influence_stat.html">influence_stat()</a></code> is simply a matrix.
Therefore, these functions will work for any matrix provided. Row
number will be used on the x-axis if applicable. However, case
identification values in the output from <code><a href="influence_stat.html">influence_stat()</a></code> will
be used for labeling individual cases.</p>
<p>The default settings for the plots
should be good enough for diagnostic
purpose. If so desired, users can
use the <code>*_aes</code> arguments to nearly
fully customize all the major
elements of the plots, as they would
do for building a ggplot2 plot.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>gcd_plot()</code>: Index plot of generalized Cook's distance.</p></li>
<li><p><code>md_plot()</code>: Index plot of Mahalanobis distance.</p></li>
<li><p><code>gcd_gof_plot()</code>: Plot the case influence of the selected fit
measure against generalized Cook's distance.</p></li>
<li><p><code>gcd_gof_md_plot()</code>: Bubble plot of the case influence of the selected
fit measure against Mahalanobis distance, with the size of a bubble
determined by generalized Cook's distance.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Pek, J., &amp; MacCallum, R. (2011). Sensitivity analysis
in structural equation models: Cases and their influence.
<em>Multivariate Behavioral Research, 46</em>(2), 202-228.
doi:10.1080/00273171.2011.561068</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="influence_stat.html">influence_stat()</a></code>.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448" class="external-link">https://orcid.org/0000-0002-9871-9448</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">pa_dat</span></span></span>
<span class="r-in"><span><span class="co"># The model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">m1 ~ a1 * iv1 + a2 * iv2</span></span></span>
<span class="r-in"><span><span class="st">dv ~ b * m1</span></span></span>
<span class="r-in"><span><span class="st">a1b := a1 * b</span></span></span>
<span class="r-in"><span><span class="st">a2b := a2 * b</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="co"># Fit the model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lavaan 0.6.17 ended normally after 1 iteration</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Estimator                                         ML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Optimization method                           NLMINB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of model parameters                         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of observations                           100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model Test User Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Test statistic                                 6.711</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Degrees of freedom                                 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   P-value (Chi-square)                           0.035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter Estimates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Standard errors                             Standard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information                                 Expected</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information saturated (h1) model          Structured</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regressions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   m1 ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     iv1       (a1)    0.215    0.106    2.036    0.042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     iv2       (a2)    0.522    0.099    5.253    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   dv ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     m1         (b)    0.517    0.106    4.895    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variances:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .m1                0.903    0.128    7.071    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .dv                1.321    0.187    7.071    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Defined Parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a1b               0.111    0.059    1.880    0.060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a2b               0.270    0.075    3.581    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Fit the model n times. Each time with one case removed.</span></span></span>
<span class="r-in"><span><span class="co"># For illustration, do this only for selected cases.</span></span></span>
<span class="r-in"><span><span class="va">fit_rerun</span> <span class="op">&lt;-</span> <span class="fu"><a href="lavaan_rerun.html">lavaan_rerun</a></span><span class="op">(</span><span class="va">fit</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                          to_rerun <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The expected CPU time is 0.38 second(s).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Could be faster if run in parallel.</span>
<span class="r-in"><span><span class="co"># Get all default influence stats</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="influence_stat.html">influence_stat</a></span><span class="op">(</span><span class="va">fit_rerun</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         chisq           cfi         rmsea           tli           a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.15407944 -0.0019968390  0.0017700811 -0.0049920976  0.024466586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -0.01944571  0.0011486763 -0.0010912308  0.0028716908  0.007153846</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.41673808  0.0082048797 -0.0074508538  0.0205121991 -0.038282397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.15430823  0.0036670450 -0.0032789585  0.0091676124 -0.024048244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.09730667  0.0002954311  0.0008280336  0.0007385778  0.066686613</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.11601736 -0.0010911517  0.0011378622 -0.0027278793  0.004007056</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              a2            b      m1~~m1      dv~~dv         gcd        md</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.0300705396  0.051965997 -0.03663071  0.01717427 0.005891665 1.9107778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.0034230301 -0.013043400 -0.06744802 -0.05802199 0.008147128 0.4442464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.0401051535 -0.029790144 -0.06335355 -0.04479763 0.009834826 3.7867385</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.0031358865  0.021674577 -0.05137193 -0.04379632 0.005610493 1.0653437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.0278462201  0.032782898  0.04979077 -0.06598323 0.013001467 1.9803351</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.0009699846  0.009509592 -0.06910195 -0.05422999 0.007823146 0.2875484</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot generalized Cook's distance. Label the 3 cases with the largest distances.</span></span></span>
<span class="r-in"><span><span class="fu">gcd_plot</span><span class="op">(</span><span class="va">out</span>, largest_gcd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot Mahalanobis distance. Label the 3 cases with the largest distances.</span></span></span>
<span class="r-in"><span><span class="fu">md_plot</span><span class="op">(</span><span class="va">out</span>, largest_md <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot case influence on model chi-square against generalized Cook's distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest absolute influence.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest generalized Cook's distance.</span></span></span>
<span class="r-in"><span><span class="fu">gcd_gof_plot</span><span class="op">(</span><span class="va">out</span>, fit_measure <span class="op">=</span> <span class="st">"chisq"</span>, largest_gcd <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>             largest_fit_measure <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot case influence on model chi-square against Mahalanobis distance.</span></span></span>
<span class="r-in"><span><span class="co"># Size of bubble determined by generalized Cook's distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest absolute influence.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest Mahalanobis distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest generalized Cook's distance.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">gcd_gof_md_plot</span><span class="op">(</span><span class="va">out</span>, fit_measure <span class="op">=</span> <span class="st">"chisq"</span>,</span></span>
<span class="r-in"><span>                     largest_gcd <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                     largest_fit_measure <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                     largest_md <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                     circle_size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use the approximate method that does not require refitting the model.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit the model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lavaan 0.6.17 ended normally after 1 iteration</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Estimator                                         ML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Optimization method                           NLMINB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of model parameters                         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of observations                           100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model Test User Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Test statistic                                 6.711</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Degrees of freedom                                 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   P-value (Chi-square)                           0.035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter Estimates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Standard errors                             Standard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information                                 Expected</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Information saturated (h1) model          Structured</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regressions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   m1 ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     iv1       (a1)    0.215    0.106    2.036    0.042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     iv2       (a2)    0.522    0.099    5.253    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   dv ~                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     m1         (b)    0.517    0.106    4.895    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variances:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .m1                0.903    0.128    7.071    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .dv                1.321    0.187    7.071    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Defined Parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Estimate  Std.Err  z-value  P(&gt;|z|)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a1b               0.111    0.059    1.880    0.060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a2b               0.270    0.075    3.581    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="influence_stat.html">influence_stat</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         chisq           cfi         rmsea          tli       m1~iv1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.15956516 -0.0020929857  0.0018614175 -0.005232464  0.024713396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -0.01892880  0.0011399150 -0.0010827859  0.002849787  0.007254736</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.38907022  0.0077186573 -0.0070161267  0.019296643 -0.037982774</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.15078126  0.0036048257 -0.0032221332  0.009012064 -0.024353717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.09685352  0.0003104848  0.0008205378  0.000776212  0.067010210</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.11602751 -0.0010913266  0.0011380304 -0.002728316  0.004065567</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         m1~iv2        dv~m1      m1~~m1      dv~~dv  gcd_approx        md</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.030383580  0.052370026 -0.03784100  0.01630488 0.005850455 1.9107778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.003469647 -0.013223396 -0.06916983 -0.05953293 0.008312026 0.4442464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -0.039820283 -0.030150418 -0.06518369 -0.04609708 0.009904544 3.7867385</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.003172373  0.021948305 -0.05277394 -0.04504791 0.005719499 1.0653437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.027951233  0.032981527  0.04860722 -0.06774242 0.012793226 1.9803351</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.000983731  0.009640981 -0.07086163 -0.05565453 0.007984573 0.2875484</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot approximate generalized Cook's distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest values.</span></span></span>
<span class="r-in"><span><span class="fu">gcd_plot</span><span class="op">(</span><span class="va">out</span>, largest_gcd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot Mahalanobis distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest values.</span></span></span>
<span class="r-in"><span><span class="fu">md_plot</span><span class="op">(</span><span class="va">out</span>, largest_md <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot approximate case influence on model chi-square against</span></span></span>
<span class="r-in"><span><span class="co"># approximate generalized Cook's distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest absolute approximate case influence.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest approximate generalized Cook's distance.</span></span></span>
<span class="r-in"><span><span class="fu">gcd_gof_plot</span><span class="op">(</span><span class="va">out</span>, fit_measure <span class="op">=</span> <span class="st">"chisq"</span>, largest_gcd <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>             largest_fit_measure <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot approximate case influence on model chi-square against Mahalanobis distance.</span></span></span>
<span class="r-in"><span><span class="co"># The size of a bubble determined by approximate generalized Cook's distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest absolute approximate case influence.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest Mahalanobis distance.</span></span></span>
<span class="r-in"><span><span class="co"># Label the 3 cases with the largest approximate generalized Cook's distance.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">gcd_gof_md_plot</span><span class="op">(</span><span class="va">out</span>, fit_measure <span class="op">=</span> <span class="st">"chisq"</span>,</span></span>
<span class="r-in"><span>                     largest_gcd <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                     largest_fit_measure <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                     largest_md <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                     circle_size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-8.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Customize elements in the plot.</span></span></span>
<span class="r-in"><span><span class="co"># For example, change the color and shape of the points.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">gcd_gof_plot</span><span class="op">(</span><span class="va">out</span>, fit_measure <span class="op">=</span> <span class="st">"chisq"</span>, largest_gcd <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>             largest_fit_measure <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>             point_aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">3</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="influence_plot-9.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Shu Fai Cheung, Mark Hok Chio Lai.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

